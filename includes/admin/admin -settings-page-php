<?php

class SmartMail_Software_Store_Admin_Settings {
    public function register_settings() {
        register_setting('smartmail_store_settings_group', 'smartmail_store_setting1');
        register_setting('smartmail_store_settings_group', 'smartmail_store_setting2');
        register_setting('smartmail_store_settings_group', 'smartmail_store_logo'); // New setting for logo
        register_setting('smartmail_store_settings_group', 'smartmail_store_allowed_ebook_types'); // New setting for allowed ebook types
        register_setting('smartmail_store_settings_group', 'smartmail_store_allowed_software_types'); // New setting for allowed software types
    }

    public function settings_page() {
        ?>
        <div class="wrap">
            <h1>SmartMail Software Store Settings</h1>
            <form method="post" action="options.php">
                <?php settings_fields('smartmail_store_settings_group'); ?>
                <?php do_settings_sections('smartmail_store_settings_group'); ?>
                <table class="form-table">
                    <tr valign="top">
                        <th scope="row">Setting 1</th>
                        <td><input type="text" name="smartmail_store_setting1" value="<?php echo esc_attr(get_option('smartmail_store_setting1')); ?>" /></td>
                    </tr>
                    <tr valign="top">
                        <th scope="row">Setting 2</th>
                        <td><input type="text" name="smartmail_store_setting2" value="<?php echo esc_attr(get_option('smartmail_store_setting2')); ?>" /></td>
                    </tr>
                    <tr valign="top">
                        <th scope="row">Store Logo</th>
                        <td><input type="text" name="smartmail_store_logo" value="<?php echo esc_attr(get_option('smartmail_store_logo')); ?>" placeholder="URL of your store logo" /></td>
                    </tr>
                    <tr valign="top">
                        <th scope="row">Allowed eBook Types</th>
                        <td><input type="text" name="smartmail_store_allowed_ebook_types" value="<?php echo esc_attr(get_option('smartmail_store_allowed_ebook_types')); ?>" placeholder="Comma-separated list of allowed ebook types" /></td>
                    </tr>
                    <tr valign="top">
                        <th scope="row">Allowed Software Types</th>
                        <td><input type="text" name="smartmail_store_allowed_software_types" value="<?php echo esc_attr(get_option('smartmail_store_allowed_software_types')); ?>" placeholder="Comma-separated list of allowed software types" /></td>
                    </tr>
                </table>
                <?php submit_button(); ?>
            </form>
        </div>
        <?php
    }

    public function add_settings_page() {
        add_options_page(
            'SmartMail Software Store Settings',
            'SmartMail Store Settings',
            'manage_options',
            'smartmail-software-store-settings',
            array($this, 'settings_page')
        );
    }

    public function __construct() {
        add_action('admin_init', array($this, 'register_settings'));
        add_action('admin_menu', array($this, 'add_settings_page'));
    }
}

if (is_admin()) {
    new SmartMail_Software_Store_Admin_Settings();
}

?>
