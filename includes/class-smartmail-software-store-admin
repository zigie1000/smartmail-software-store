<div class="wrap">
    <h1>Software Store</h1>
    <form method="post" action="options.php">
        <?php
        settings_fields( 'smartmail_software_store_group' );
        do_settings_sections( 'smartmail-software-store' );
        submit_button();
        ?>
    </form>
</div>

<?php
function smartmail_software_store_settings() {
    register_setting( 'smartmail_software_store_group', 'smartmail_software_store_data' );

    add_settings_section(
        'smartmail_software_store_section',
        'Add New Software',
        null,
        'smartmail-software-store'
    );

    add_settings_field(
        'smartmail_software_store_name',
        'Software Name',
        'smartmail_software_store_name_callback',
        'smartmail-software-store',
        'smartmail_software_store_section'
    );

    add_settings_field(
        'smartmail_software_store_description',
        'Description',
        'smartmail_software_store_description_callback',
        'smartmail-software-store',
        'smartmail_software_store_section'
    );

    add_settings_field(
        'smartmail_software_store_price',
        'Price',
        'smartmail_software_store_price_callback',
        'smartmail-software-store',
        'smartmail_software_store_section'
    );

    add_settings_field(
        'smartmail_software_store_file',
        'File URL',
        'smartmail_software_store_file_callback',
        'smartmail-software-store',
        'smartmail_software_store_section'
    );
}
add_action( 'admin_init', 'smartmail_software_store_settings' );

function smartmail_software_store_name_callback() {
    $data = get_option( 'smartmail_software_store_data' );
    ?>
    <input type="text" name="smartmail_software_store_data[name]" value="<?php echo esc_attr( $data['name'] ); ?>">
    <?php
}

function smartmail_software_store_description_callback() {
    $data = get_option( 'smartmail_software_store_data' );
    ?>
    <textarea name="smartmail_software_store_data[description]"><?php echo esc_attr( $data['description'] ); ?></textarea>
    <?php
}

function smartmail_software_store_price_callback() {
    $data = get_option( 'smartmail_software_store_data' );
    ?>
    <input type="text" name="smartmail_software_store_data[price]" value="<?php echo esc_attr( $data['price'] ); ?>">
    <?php
}

function smartmail_software_store_file_callback() {
    $data = get_option( 'smartmail_software_store_data' );
    ?>
    <input type="text" name="smartmail_software_store_data[file]" value="<?php echo esc_url( $data['file'] ); ?>">
    <?php
}
